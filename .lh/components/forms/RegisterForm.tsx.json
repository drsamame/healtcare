{
    "sourceFile": "components/forms/RegisterForm.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1721202372281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1721202408544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n import { createUser } from '@/lib/actions/patient.actions';\r\n import { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\n import { Doctors, genderOptions, PatientFormDefaultValues } from '@/constants';\r\n import { Label } from '@/components/ui/label';\r\n-import { SelectItem } from '@radix-ui/react-select';\r\n+import { SelectItem } from '@/components/ui/select';\r\n import Image from 'next/image';\r\n import { PatientFormValidation } from '@/lib/validation';\r\n \r\n const RegisterForm = ({ user }: { user: User }) => {\r\n"
                }
            ],
            "date": 1721202372281,
            "name": "Commit-0",
            "content": "'use client';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { useForm } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { Form, FormControl } from '@/components/ui/form';\r\nimport CustomFormField, { FormFieldType } from '../CustomFormField';\r\nimport SubmitButton from '../SubmitButton';\r\nimport { useState } from 'react';\r\nimport { userFormValidation } from '@/lib/validation';\r\nimport { useRouter } from 'next/navigation';\r\nimport { createUser } from '@/lib/actions/patient.actions';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { Doctors, genderOptions, PatientFormDefaultValues } from '@/constants';\r\nimport { Label } from '@/components/ui/label';\r\nimport { SelectItem } from '@radix-ui/react-select';\r\nimport Image from 'next/image';\r\nimport { PatientFormValidation } from '@/lib/validation';\r\n\r\nconst RegisterForm = ({ user }: { user: User }) => {\r\n\tconst router = useRouter();\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst form = useForm<z.infer<typeof PatientFormValidation>>({\r\n\t\tresolver: zodResolver(PatientFormValidation),\r\n\t\tdefaultValues: {\r\n\t\t\t...PatientFormDefaultValues,\r\n\t\t\tname: '',\r\n\t\t\temail: '',\r\n\t\t\tphone: '',\r\n\t\t},\r\n\t});\r\n\r\n\tasync function onSubmit({\r\n\t\tname,\r\n\t\temail,\r\n\t\tphone,\r\n\t}: z.infer<typeof PatientFormValidation>) {\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst userData = { name, email, phone };\r\n\t\t\tconst res = await createUser(userData);\r\n\r\n\t\t\tif (!res?.error) {\r\n\t\t\t\trouter.push(`/patients/${res?.data.$id}/register`);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\tform.setError('root.serverError', {\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t'Ya existe un usuario con la misma identificación, correo electrónico o teléfono en este proyecto.',\r\n\t\t\t\t\ttype: '400',\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(form.formState.errors?.root?.serverError.type);\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tconsole.log(e);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<Form {...form}>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={form.handleSubmit(onSubmit)}\r\n\t\t\t\tclassName=\"space-y-12 flex-1\"\r\n\t\t\t>\r\n\t\t\t\t<section className=\"mb-12 space-y-4\">\r\n\t\t\t\t\t<h1 className=\"header\">Bienvenido! ✋</h1>\r\n\t\t\t\t\t<p className=\"text-dark-700\">Déjanos conocer mas acerca de tí.</p>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section className=\"mb-12 space-y-6\">\r\n\t\t\t\t\t<div className=\"mb-9 space-y-1\">\r\n\t\t\t\t\t\t<h2 className=\"sub-header\">Información personal</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\tfieldType={FormFieldType.INPUT}\r\n\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tlabel=\"Nombre completo\"\r\n\t\t\t\t\t\tplaceholder=\"Ej. Juan Pérez\"\r\n\t\t\t\t\t\ticonSrc=\"/assets/icons/user.svg\"\r\n\t\t\t\t\t\ticonAlt=\"user\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"flex flex-col gap-6 xl:flex-row\">\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.INPUT}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\tlabel=\"Correo\"\r\n\t\t\t\t\t\t\tplaceholder=\"drsamame@gmail.com\"\r\n\t\t\t\t\t\t\ticonSrc=\"/assets/icons/email.svg\"\r\n\t\t\t\t\t\t\ticonAlt=\"email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.PHONE}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\t\tlabel=\"Celular\"\r\n\t\t\t\t\t\t\tplaceholder=\"955061182\"\r\n\t\t\t\t\t\t\ticonSrc=\"/assets/icons/email.svg\"\r\n\t\t\t\t\t\t\ticonAlt=\"email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex flex-col gap-6 xl:flex-row\">\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.DATEPICKER}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"birthDate\"\r\n\t\t\t\t\t\t\tlabel=\"Fecha de nacimiento\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.SKELETON}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"gender\"\r\n\t\t\t\t\t\t\tlabel=\" Género\"\r\n\t\t\t\t\t\t\trenderSkeleton={(field) => (\r\n\t\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex h-11 gap-6 xl:justify-between\"\r\n\t\t\t\t\t\t\t\t\t\tonValueChange={field.onChange}\r\n\t\t\t\t\t\t\t\t\t\tdefaultValue={field.value}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{genderOptions.map(({ label, value: option }) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={option} className=\"radio-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioGroupItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={option}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={option}\r\n\t\t\t\t\t\t\t\t\t\t\t\t></RadioGroupItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label htmlFor={option} className=\"cursor-pointer\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</RadioGroup>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex flex-col gap-6 xl:flex-row\">\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.INPUT}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"address\"\r\n\t\t\t\t\t\t\tlabel=\"Dirección\"\r\n\t\t\t\t\t\t\tplaceholder=\"Av. Canada mz. 1 lt. 2\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.INPUT}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"ocupation\"\r\n\t\t\t\t\t\t\tlabel=\"Ocupación\"\r\n\t\t\t\t\t\t\tplaceholder=\"Software Developer\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"flex flex-col gap-6 xl:flex-row\">\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.INPUT}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"emergencyContactName\"\r\n\t\t\t\t\t\t\tlabel=\"Nombre de contacto de emergencia\"\r\n\t\t\t\t\t\t\tplaceholder=\"Rithe Irena Salazar Escajadillo\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\t\tfieldType={FormFieldType.PHONE}\r\n\t\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\t\tname=\"emergencyContactPhone\"\r\n\t\t\t\t\t\t\tlabel=\"Numbero de contacto de emergencia\"\r\n\t\t\t\t\t\t\tplaceholder=\"955061182\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className=\"mb-12 space-y-6\">\r\n\t\t\t\t\t<div className=\"mb-9 space-y-1\">\r\n\t\t\t\t\t\t<h2 className=\"sub-header\">Información Médica</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<CustomFormField\r\n\t\t\t\t\t\tfieldType={FormFieldType.SELECT}\r\n\t\t\t\t\t\tcontrol={form.control}\r\n\t\t\t\t\t\tname=\"primaryPhysician\"\r\n\t\t\t\t\t\tlabel=\"Médico primario\"\r\n\t\t\t\t\t\tplaceholder=\"Seleccione un médico\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Doctors.map((doctor, i) => (\r\n\t\t\t\t\t\t\t<SelectItem key={doctor.name + i} value={doctor.name}>\r\n\t\t\t\t\t\t\t\t<div className=\"flex cursor-pointer items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\tsrc={doctor.image}\r\n\t\t\t\t\t\t\t\t\t\twidth={32}\r\n\t\t\t\t\t\t\t\t\t\theight={32}\r\n\t\t\t\t\t\t\t\t\t\talt=\"doctor\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"rounded-full border border-dark-500\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<p>{doctor.name}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</SelectItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</CustomFormField>\r\n\t\t\t\t</section>\r\n\t\t\t\t<SubmitButton isLoading={isLoading}>Empezar</SubmitButton>\r\n\t\t\t\t{form.formState.errors?.root?.serverError.type == 400 && (\r\n\t\t\t\t\t<p className=\"text-sm font-medium text-destructive shad-error\">\r\n\t\t\t\t\t\t{form.formState.errors?.root?.serverError.message}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default RegisterForm;\r\n"
        }
    ]
}